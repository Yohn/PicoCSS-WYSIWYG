(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function i(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=i(a);fetch(a.href,l)}})();/*! @license DOMPurify 3.2.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.3/LICENSE */const{entries:kt,setPrototypeOf:Tt,isFrozen:dn,getPrototypeOf:un,getOwnPropertyDescriptor:fn}=Object;let{freeze:I,seal:M,create:Mt}=Object,{apply:ze,construct:We}=typeof Reflect<"u"&&Reflect;I||(I=function(t){return t});M||(M=function(t){return t});ze||(ze=function(t,i,r){return t.apply(i,r)});We||(We=function(t,i){return new t(...i)});const me=k(Array.prototype.forEach),bt=k(Array.prototype.pop),J=k(Array.prototype.push),pe=k(String.prototype.toLowerCase),Oe=k(String.prototype.toString),At=k(String.prototype.match),ee=k(String.prototype.replace),mn=k(String.prototype.indexOf),hn=k(String.prototype.trim),w=k(Object.prototype.hasOwnProperty),C=k(RegExp.prototype.test),te=pn(TypeError);function k(e){return function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];return ze(e,t,r)}}function pn(e){return function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return We(e,i)}}function m(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:pe;Tt&&Tt(e,null);let r=t.length;for(;r--;){let a=t[r];if(typeof a=="string"){const l=i(a);l!==a&&(dn(t)||(t[r]=l),a=l)}e[a]=!0}return e}function gn(e){for(let t=0;t<e.length;t++)w(e,t)||(e[t]=null);return e}function F(e){const t=Mt(null);for(const[i,r]of kt(e))w(e,i)&&(Array.isArray(r)?t[i]=gn(r):r&&typeof r=="object"&&r.constructor===Object?t[i]=F(r):t[i]=r);return t}function ne(e,t){for(;e!==null;){const r=fn(e,t);if(r){if(r.get)return k(r.get);if(typeof r.value=="function")return k(r.value)}e=un(e)}function i(){return null}return i}const vt=I(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),De=I(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),xe=I(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),En=I(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Pe=I(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Tn=I(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),yt=I(["#text"]),_t=I(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Be=I(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Lt=I(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),he=I(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),bn=M(/\{\{[\w\W]*|[\w\W]*\}\}/gm),An=M(/<%[\w\W]*|[\w\W]*%>/gm),vn=M(/\$\{[\w\W]*}/gm),yn=M(/^data-[\-\w.\u00B7-\uFFFF]+$/),_n=M(/^aria-[\-\w]+$/),wt=M(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ln=M(/^(?:\w+script|data):/i),Sn=M(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ot=M(/^html$/i),Cn=M(/^[a-z][.\w]*(-[.\w]+)+$/i);var St=Object.freeze({__proto__:null,ARIA_ATTR:_n,ATTR_WHITESPACE:Sn,CUSTOM_ELEMENT:Cn,DATA_ATTR:yn,DOCTYPE_NAME:Ot,ERB_EXPR:An,IS_ALLOWED_URI:wt,IS_SCRIPT_OR_DATA:Ln,MUSTACHE_EXPR:bn,TMPLIT_EXPR:vn});const ie={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},In=function(){return typeof window>"u"?null:window},Rn=function(t,i){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const a="data-tt-policy-suffix";i&&i.hasAttribute(a)&&(r=i.getAttribute(a));const l="dompurify"+(r?"#"+r:"");try{return t.createPolicy(l,{createHTML(u){return u},createScriptURL(u){return u}})}catch{return console.warn("TrustedTypes policy "+l+" could not be created."),null}},Ct=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Dt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:In();const t=c=>Dt(c);if(t.version="3.2.3",t.removed=[],!e||!e.document||e.document.nodeType!==ie.document)return t.isSupported=!1,t;let{document:i}=e;const r=i,a=r.currentScript,{DocumentFragment:l,HTMLTemplateElement:u,Node:f,Element:d,NodeFilter:h,NamedNodeMap:v=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:B,DOMParser:Wt,trustedTypes:re}=e,q=d.prototype,jt=ne(q,"cloneNode"),Gt=ne(q,"remove"),$t=ne(q,"nextSibling"),Yt=ne(q,"childNodes"),ae=ne(q,"parentNode");if(typeof u=="function"){const c=i.createElement("template");c.content&&c.content.ownerDocument&&(i=c.content.ownerDocument)}let L,V="";const{implementation:Te,createNodeIterator:qt,createDocumentFragment:Vt,getElementsByTagName:Xt}=i,{importNode:Kt}=r;let N=Ct();t.isSupported=typeof kt=="function"&&typeof ae=="function"&&Te&&Te.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:be,ERB_EXPR:Ae,TMPLIT_EXPR:ve,DATA_ATTR:Zt,ARIA_ATTR:Qt,IS_SCRIPT_OR_DATA:Jt,ATTR_WHITESPACE:qe,CUSTOM_ELEMENT:en}=St;let{IS_ALLOWED_URI:Ve}=St,E=null;const Xe=m({},[...vt,...De,...xe,...Pe,...yt]);let b=null;const Ke=m({},[..._t,...Be,...Lt,...he]);let g=Object.seal(Mt(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),X=null,ye=null,Ze=!0,_e=!0,Qe=!1,Je=!0,z=!1,Le=!0,H=!1,Se=!1,Ce=!1,W=!1,oe=!1,le=!1,et=!0,tt=!1;const tn="user-content-";let Ie=!0,K=!1,j={},G=null;const nt=m({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let it=null;const rt=m({},["audio","video","img","source","image","track"]);let Re=null;const at=m({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),se="http://www.w3.org/1998/Math/MathML",ce="http://www.w3.org/2000/svg",x="http://www.w3.org/1999/xhtml";let $=x,Ne=!1,ke=null;const nn=m({},[se,ce,x],Oe);let de=m({},["mi","mo","mn","ms","mtext"]),ue=m({},["annotation-xml"]);const rn=m({},["title","style","font","a","script"]);let Z=null;const an=["application/xhtml+xml","text/html"],on="text/html";let T=null,Y=null;const ln=i.createElement("form"),ot=function(n){return n instanceof RegExp||n instanceof Function},Me=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Y&&Y===n)){if((!n||typeof n!="object")&&(n={}),n=F(n),Z=an.indexOf(n.PARSER_MEDIA_TYPE)===-1?on:n.PARSER_MEDIA_TYPE,T=Z==="application/xhtml+xml"?Oe:pe,E=w(n,"ALLOWED_TAGS")?m({},n.ALLOWED_TAGS,T):Xe,b=w(n,"ALLOWED_ATTR")?m({},n.ALLOWED_ATTR,T):Ke,ke=w(n,"ALLOWED_NAMESPACES")?m({},n.ALLOWED_NAMESPACES,Oe):nn,Re=w(n,"ADD_URI_SAFE_ATTR")?m(F(at),n.ADD_URI_SAFE_ATTR,T):at,it=w(n,"ADD_DATA_URI_TAGS")?m(F(rt),n.ADD_DATA_URI_TAGS,T):rt,G=w(n,"FORBID_CONTENTS")?m({},n.FORBID_CONTENTS,T):nt,X=w(n,"FORBID_TAGS")?m({},n.FORBID_TAGS,T):{},ye=w(n,"FORBID_ATTR")?m({},n.FORBID_ATTR,T):{},j=w(n,"USE_PROFILES")?n.USE_PROFILES:!1,Ze=n.ALLOW_ARIA_ATTR!==!1,_e=n.ALLOW_DATA_ATTR!==!1,Qe=n.ALLOW_UNKNOWN_PROTOCOLS||!1,Je=n.ALLOW_SELF_CLOSE_IN_ATTR!==!1,z=n.SAFE_FOR_TEMPLATES||!1,Le=n.SAFE_FOR_XML!==!1,H=n.WHOLE_DOCUMENT||!1,W=n.RETURN_DOM||!1,oe=n.RETURN_DOM_FRAGMENT||!1,le=n.RETURN_TRUSTED_TYPE||!1,Ce=n.FORCE_BODY||!1,et=n.SANITIZE_DOM!==!1,tt=n.SANITIZE_NAMED_PROPS||!1,Ie=n.KEEP_CONTENT!==!1,K=n.IN_PLACE||!1,Ve=n.ALLOWED_URI_REGEXP||wt,$=n.NAMESPACE||x,de=n.MATHML_TEXT_INTEGRATION_POINTS||de,ue=n.HTML_INTEGRATION_POINTS||ue,g=n.CUSTOM_ELEMENT_HANDLING||{},n.CUSTOM_ELEMENT_HANDLING&&ot(n.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(g.tagNameCheck=n.CUSTOM_ELEMENT_HANDLING.tagNameCheck),n.CUSTOM_ELEMENT_HANDLING&&ot(n.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(g.attributeNameCheck=n.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),n.CUSTOM_ELEMENT_HANDLING&&typeof n.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(g.allowCustomizedBuiltInElements=n.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),z&&(_e=!1),oe&&(W=!0),j&&(E=m({},yt),b=[],j.html===!0&&(m(E,vt),m(b,_t)),j.svg===!0&&(m(E,De),m(b,Be),m(b,he)),j.svgFilters===!0&&(m(E,xe),m(b,Be),m(b,he)),j.mathMl===!0&&(m(E,Pe),m(b,Lt),m(b,he))),n.ADD_TAGS&&(E===Xe&&(E=F(E)),m(E,n.ADD_TAGS,T)),n.ADD_ATTR&&(b===Ke&&(b=F(b)),m(b,n.ADD_ATTR,T)),n.ADD_URI_SAFE_ATTR&&m(Re,n.ADD_URI_SAFE_ATTR,T),n.FORBID_CONTENTS&&(G===nt&&(G=F(G)),m(G,n.FORBID_CONTENTS,T)),Ie&&(E["#text"]=!0),H&&m(E,["html","head","body"]),E.table&&(m(E,["tbody"]),delete X.tbody),n.TRUSTED_TYPES_POLICY){if(typeof n.TRUSTED_TYPES_POLICY.createHTML!="function")throw te('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof n.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw te('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');L=n.TRUSTED_TYPES_POLICY,V=L.createHTML("")}else L===void 0&&(L=Rn(re,a)),L!==null&&typeof V=="string"&&(V=L.createHTML(""));I&&I(n),Y=n}},lt=m({},[...De,...xe,...En]),st=m({},[...Pe,...Tn]),sn=function(n){let o=ae(n);(!o||!o.tagName)&&(o={namespaceURI:$,tagName:"template"});const s=pe(n.tagName),p=pe(o.tagName);return ke[n.namespaceURI]?n.namespaceURI===ce?o.namespaceURI===x?s==="svg":o.namespaceURI===se?s==="svg"&&(p==="annotation-xml"||de[p]):!!lt[s]:n.namespaceURI===se?o.namespaceURI===x?s==="math":o.namespaceURI===ce?s==="math"&&ue[p]:!!st[s]:n.namespaceURI===x?o.namespaceURI===ce&&!ue[p]||o.namespaceURI===se&&!de[p]?!1:!st[s]&&(rn[s]||!lt[s]):!!(Z==="application/xhtml+xml"&&ke[n.namespaceURI]):!1},O=function(n){J(t.removed,{element:n});try{ae(n).removeChild(n)}catch{Gt(n)}},fe=function(n,o){try{J(t.removed,{attribute:o.getAttributeNode(n),from:o})}catch{J(t.removed,{attribute:null,from:o})}if(o.removeAttribute(n),n==="is")if(W||oe)try{O(o)}catch{}else try{o.setAttribute(n,"")}catch{}},ct=function(n){let o=null,s=null;if(Ce)n="<remove></remove>"+n;else{const A=At(n,/^[\r\n\t ]+/);s=A&&A[0]}Z==="application/xhtml+xml"&&$===x&&(n='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+n+"</body></html>");const p=L?L.createHTML(n):n;if($===x)try{o=new Wt().parseFromString(p,Z)}catch{}if(!o||!o.documentElement){o=Te.createDocument($,"template",null);try{o.documentElement.innerHTML=Ne?V:p}catch{}}const y=o.body||o.documentElement;return n&&s&&y.insertBefore(i.createTextNode(s),y.childNodes[0]||null),$===x?Xt.call(o,H?"html":"body")[0]:H?o.documentElement:y},dt=function(n){return qt.call(n.ownerDocument||n,n,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},we=function(n){return n instanceof B&&(typeof n.nodeName!="string"||typeof n.textContent!="string"||typeof n.removeChild!="function"||!(n.attributes instanceof v)||typeof n.removeAttribute!="function"||typeof n.setAttribute!="function"||typeof n.namespaceURI!="string"||typeof n.insertBefore!="function"||typeof n.hasChildNodes!="function")},ut=function(n){return typeof f=="function"&&n instanceof f};function P(c,n,o){me(c,s=>{s.call(t,n,o,Y)})}const ft=function(n){let o=null;if(P(N.beforeSanitizeElements,n,null),we(n))return O(n),!0;const s=T(n.nodeName);if(P(N.uponSanitizeElement,n,{tagName:s,allowedTags:E}),n.hasChildNodes()&&!ut(n.firstElementChild)&&C(/<[/\w]/g,n.innerHTML)&&C(/<[/\w]/g,n.textContent)||n.nodeType===ie.progressingInstruction||Le&&n.nodeType===ie.comment&&C(/<[/\w]/g,n.data))return O(n),!0;if(!E[s]||X[s]){if(!X[s]&&ht(s)&&(g.tagNameCheck instanceof RegExp&&C(g.tagNameCheck,s)||g.tagNameCheck instanceof Function&&g.tagNameCheck(s)))return!1;if(Ie&&!G[s]){const p=ae(n)||n.parentNode,y=Yt(n)||n.childNodes;if(y&&p){const A=y.length;for(let R=A-1;R>=0;--R){const D=jt(y[R],!0);D.__removalCount=(n.__removalCount||0)+1,p.insertBefore(D,$t(n))}}}return O(n),!0}return n instanceof d&&!sn(n)||(s==="noscript"||s==="noembed"||s==="noframes")&&C(/<\/no(script|embed|frames)/i,n.innerHTML)?(O(n),!0):(z&&n.nodeType===ie.text&&(o=n.textContent,me([be,Ae,ve],p=>{o=ee(o,p," ")}),n.textContent!==o&&(J(t.removed,{element:n.cloneNode()}),n.textContent=o)),P(N.afterSanitizeElements,n,null),!1)},mt=function(n,o,s){if(et&&(o==="id"||o==="name")&&(s in i||s in ln))return!1;if(!(_e&&!ye[o]&&C(Zt,o))){if(!(Ze&&C(Qt,o))){if(!b[o]||ye[o]){if(!(ht(n)&&(g.tagNameCheck instanceof RegExp&&C(g.tagNameCheck,n)||g.tagNameCheck instanceof Function&&g.tagNameCheck(n))&&(g.attributeNameCheck instanceof RegExp&&C(g.attributeNameCheck,o)||g.attributeNameCheck instanceof Function&&g.attributeNameCheck(o))||o==="is"&&g.allowCustomizedBuiltInElements&&(g.tagNameCheck instanceof RegExp&&C(g.tagNameCheck,s)||g.tagNameCheck instanceof Function&&g.tagNameCheck(s))))return!1}else if(!Re[o]){if(!C(Ve,ee(s,qe,""))){if(!((o==="src"||o==="xlink:href"||o==="href")&&n!=="script"&&mn(s,"data:")===0&&it[n])){if(!(Qe&&!C(Jt,ee(s,qe,"")))){if(s)return!1}}}}}}return!0},ht=function(n){return n!=="annotation-xml"&&At(n,en)},pt=function(n){P(N.beforeSanitizeAttributes,n,null);const{attributes:o}=n;if(!o||we(n))return;const s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:b,forceKeepAttr:void 0};let p=o.length;for(;p--;){const y=o[p],{name:A,namespaceURI:R,value:D}=y,Q=T(A);let S=A==="value"?D:hn(D);if(s.attrName=Q,s.attrValue=S,s.keepAttr=!0,s.forceKeepAttr=void 0,P(N.uponSanitizeAttribute,n,s),S=s.attrValue,tt&&(Q==="id"||Q==="name")&&(fe(A,n),S=tn+S),Le&&C(/((--!?|])>)|<\/(style|title)/i,S)){fe(A,n);continue}if(s.forceKeepAttr||(fe(A,n),!s.keepAttr))continue;if(!Je&&C(/\/>/i,S)){fe(A,n);continue}z&&me([be,Ae,ve],Et=>{S=ee(S,Et," ")});const gt=T(n.nodeName);if(mt(gt,Q,S)){if(L&&typeof re=="object"&&typeof re.getAttributeType=="function"&&!R)switch(re.getAttributeType(gt,Q)){case"TrustedHTML":{S=L.createHTML(S);break}case"TrustedScriptURL":{S=L.createScriptURL(S);break}}try{R?n.setAttributeNS(R,A,S):n.setAttribute(A,S),we(n)?O(n):bt(t.removed)}catch{}}}P(N.afterSanitizeAttributes,n,null)},cn=function c(n){let o=null;const s=dt(n);for(P(N.beforeSanitizeShadowDOM,n,null);o=s.nextNode();)P(N.uponSanitizeShadowNode,o,null),ft(o),pt(o),o.content instanceof l&&c(o.content);P(N.afterSanitizeShadowDOM,n,null)};return t.sanitize=function(c){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=null,s=null,p=null,y=null;if(Ne=!c,Ne&&(c="<!-->"),typeof c!="string"&&!ut(c))if(typeof c.toString=="function"){if(c=c.toString(),typeof c!="string")throw te("dirty is not a string, aborting")}else throw te("toString is not a function");if(!t.isSupported)return c;if(Se||Me(n),t.removed=[],typeof c=="string"&&(K=!1),K){if(c.nodeName){const D=T(c.nodeName);if(!E[D]||X[D])throw te("root node is forbidden and cannot be sanitized in-place")}}else if(c instanceof f)o=ct("<!---->"),s=o.ownerDocument.importNode(c,!0),s.nodeType===ie.element&&s.nodeName==="BODY"||s.nodeName==="HTML"?o=s:o.appendChild(s);else{if(!W&&!z&&!H&&c.indexOf("<")===-1)return L&&le?L.createHTML(c):c;if(o=ct(c),!o)return W?null:le?V:""}o&&Ce&&O(o.firstChild);const A=dt(K?c:o);for(;p=A.nextNode();)ft(p),pt(p),p.content instanceof l&&cn(p.content);if(K)return c;if(W){if(oe)for(y=Vt.call(o.ownerDocument);o.firstChild;)y.appendChild(o.firstChild);else y=o;return(b.shadowroot||b.shadowrootmode)&&(y=Kt.call(r,y,!0)),y}let R=H?o.outerHTML:o.innerHTML;return H&&E["!doctype"]&&o.ownerDocument&&o.ownerDocument.doctype&&o.ownerDocument.doctype.name&&C(Ot,o.ownerDocument.doctype.name)&&(R="<!DOCTYPE "+o.ownerDocument.doctype.name+`>
`+R),z&&me([be,Ae,ve],D=>{R=ee(R,D," ")}),L&&le?L.createHTML(R):R},t.setConfig=function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Me(c),Se=!0},t.clearConfig=function(){Y=null,Se=!1},t.isValidAttribute=function(c,n,o){Y||Me({});const s=T(c),p=T(n);return mt(s,p,o)},t.addHook=function(c,n){typeof n=="function"&&J(N[c],n)},t.removeHook=function(c){return bt(N[c])},t.removeHooks=function(c){N[c]=[]},t.removeAllHooks=function(){N=Ct()},t}var U=Dt();function Nn(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}function je(e,t){return Array(t+1).join(e)}function kn(e){return e.replace(/^\n*/,"")}function Mn(e){for(var t=e.length;t>0&&e[t-1]===`
`;)t--;return e.substring(0,t)}var wn=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function Ge(e){return $e(e,wn)}var xt=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function Pt(e){return $e(e,xt)}function On(e){return Ht(e,xt)}var Bt=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function Dn(e){return $e(e,Bt)}function xn(e){return Ht(e,Bt)}function $e(e,t){return t.indexOf(e.nodeName)>=0}function Ht(e,t){return e.getElementsByTagName&&t.some(function(i){return e.getElementsByTagName(i).length})}var _={};_.paragraph={filter:"p",replacement:function(e){return`

`+e+`

`}};_.lineBreak={filter:"br",replacement:function(e,t,i){return i.br+`
`}};_.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(e,t,i){var r=Number(t.nodeName.charAt(1));if(i.headingStyle==="setext"&&r<3){var a=je(r===1?"=":"-",e.length);return`

`+e+`
`+a+`

`}else return`

`+je("#",r)+" "+e+`

`}};_.blockquote={filter:"blockquote",replacement:function(e){return e=e.replace(/^\n+|\n+$/g,""),e=e.replace(/^/gm,"> "),`

`+e+`

`}};_.list={filter:["ul","ol"],replacement:function(e,t){var i=t.parentNode;return i.nodeName==="LI"&&i.lastElementChild===t?`
`+e:`

`+e+`

`}};_.listItem={filter:"li",replacement:function(e,t,i){e=e.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var r=i.bulletListMarker+"   ",a=t.parentNode;if(a.nodeName==="OL"){var l=a.getAttribute("start"),u=Array.prototype.indexOf.call(a.children,t);r=(l?Number(l)+u:u+1)+".  "}return r+e+(t.nextSibling&&!/\n$/.test(e)?`
`:"")}};_.indentedCodeBlock={filter:function(e,t){return t.codeBlockStyle==="indented"&&e.nodeName==="PRE"&&e.firstChild&&e.firstChild.nodeName==="CODE"},replacement:function(e,t,i){return`

    `+t.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};_.fencedCodeBlock={filter:function(e,t){return t.codeBlockStyle==="fenced"&&e.nodeName==="PRE"&&e.firstChild&&e.firstChild.nodeName==="CODE"},replacement:function(e,t,i){for(var r=t.firstChild.getAttribute("class")||"",a=(r.match(/language-(\S+)/)||[null,""])[1],l=t.firstChild.textContent,u=i.fence.charAt(0),f=3,d=new RegExp("^"+u+"{3,}","gm"),h;h=d.exec(l);)h[0].length>=f&&(f=h[0].length+1);var v=je(u,f);return`

`+v+a+`
`+l.replace(/\n$/,"")+`
`+v+`

`}};_.horizontalRule={filter:"hr",replacement:function(e,t,i){return`

`+i.hr+`

`}};_.inlineLink={filter:function(e,t){return t.linkStyle==="inlined"&&e.nodeName==="A"&&e.getAttribute("href")},replacement:function(e,t){var i=t.getAttribute("href");i&&(i=i.replace(/([()])/g,"\\$1"));var r=ge(t.getAttribute("title"));return r&&(r=' "'+r.replace(/"/g,'\\"')+'"'),"["+e+"]("+i+r+")"}};_.referenceLink={filter:function(e,t){return t.linkStyle==="referenced"&&e.nodeName==="A"&&e.getAttribute("href")},replacement:function(e,t,i){var r=t.getAttribute("href"),a=ge(t.getAttribute("title"));a&&(a=' "'+a+'"');var l,u;switch(i.linkReferenceStyle){case"collapsed":l="["+e+"][]",u="["+e+"]: "+r+a;break;case"shortcut":l="["+e+"]",u="["+e+"]: "+r+a;break;default:var f=this.references.length+1;l="["+e+"]["+f+"]",u="["+f+"]: "+r+a}return this.references.push(u),l},references:[],append:function(e){var t="";return this.references.length&&(t=`

`+this.references.join(`
`)+`

`,this.references=[]),t}};_.emphasis={filter:["em","i"],replacement:function(e,t,i){return e.trim()?i.emDelimiter+e+i.emDelimiter:""}};_.strong={filter:["strong","b"],replacement:function(e,t,i){return e.trim()?i.strongDelimiter+e+i.strongDelimiter:""}};_.code={filter:function(e){var t=e.previousSibling||e.nextSibling,i=e.parentNode.nodeName==="PRE"&&!t;return e.nodeName==="CODE"&&!i},replacement:function(e){if(!e)return"";e=e.replace(/\r?\n|\r/g," ");for(var t=/^`|^ .*?[^ ].* $|`$/.test(e)?" ":"",i="`",r=e.match(/`+/gm)||[];r.indexOf(i)!==-1;)i=i+"`";return i+t+e+t+i}};_.image={filter:"img",replacement:function(e,t){var i=ge(t.getAttribute("alt")),r=t.getAttribute("src")||"",a=ge(t.getAttribute("title")),l=a?' "'+a+'"':"";return r?"!["+i+"]("+r+l+")":""}};function ge(e){return e?e.replace(/(\n+\s*)+/g,`
`):""}function Ut(e){this.options=e,this._keep=[],this._remove=[],this.blankRule={replacement:e.blankReplacement},this.keepReplacement=e.keepReplacement,this.defaultRule={replacement:e.defaultReplacement},this.array=[];for(var t in e.rules)this.array.push(e.rules[t])}Ut.prototype={add:function(e,t){this.array.unshift(t)},keep:function(e){this._keep.unshift({filter:e,replacement:this.keepReplacement})},remove:function(e){this._remove.unshift({filter:e,replacement:function(){return""}})},forNode:function(e){if(e.isBlank)return this.blankRule;var t;return(t=He(this.array,e,this.options))||(t=He(this._keep,e,this.options))||(t=He(this._remove,e,this.options))?t:this.defaultRule},forEach:function(e){for(var t=0;t<this.array.length;t++)e(this.array[t],t)}};function He(e,t,i){for(var r=0;r<e.length;r++){var a=e[r];if(Pn(a,t,i))return a}}function Pn(e,t,i){var r=e.filter;if(typeof r=="string"){if(r===t.nodeName.toLowerCase())return!0}else if(Array.isArray(r)){if(r.indexOf(t.nodeName.toLowerCase())>-1)return!0}else if(typeof r=="function"){if(r.call(e,t,i))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function Bn(e){var t=e.element,i=e.isBlock,r=e.isVoid,a=e.isPre||function(B){return B.nodeName==="PRE"};if(!(!t.firstChild||a(t))){for(var l=null,u=!1,f=null,d=It(f,t,a);d!==t;){if(d.nodeType===3||d.nodeType===4){var h=d.data.replace(/[ \r\n\t]+/g," ");if((!l||/ $/.test(l.data))&&!u&&h[0]===" "&&(h=h.substr(1)),!h){d=Ue(d);continue}d.data=h,l=d}else if(d.nodeType===1)i(d)||d.nodeName==="BR"?(l&&(l.data=l.data.replace(/ $/,"")),l=null,u=!1):r(d)||a(d)?(l=null,u=!0):l&&(u=!1);else{d=Ue(d);continue}var v=It(f,d,a);f=d,d=v}l&&(l.data=l.data.replace(/ $/,""),l.data||Ue(l))}}function Ue(e){var t=e.nextSibling||e.parentNode;return e.parentNode.removeChild(e),t}function It(e,t,i){return e&&e.parentNode===t||i(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}var Ye=typeof window<"u"?window:{};function Hn(){var e=Ye.DOMParser,t=!1;try{new e().parseFromString("","text/html")&&(t=!0)}catch{}return t}function Un(){var e=function(){};return Fn()?e.prototype.parseFromString=function(t){var i=new window.ActiveXObject("htmlfile");return i.designMode="on",i.open(),i.write(t),i.close(),i}:e.prototype.parseFromString=function(t){var i=document.implementation.createHTMLDocument("");return i.open(),i.write(t),i.close(),i},e}function Fn(){var e=!1;try{document.implementation.createHTMLDocument("").open()}catch{Ye.ActiveXObject&&(e=!0)}return e}var zn=Hn()?Ye.DOMParser:Un();function Wn(e,t){var i;if(typeof e=="string"){var r=jn().parseFromString('<x-turndown id="turndown-root">'+e+"</x-turndown>","text/html");i=r.getElementById("turndown-root")}else i=e.cloneNode(!0);return Bn({element:i,isBlock:Ge,isVoid:Pt,isPre:t.preformattedCode?Gn:null}),i}var Fe;function jn(){return Fe=Fe||new zn,Fe}function Gn(e){return e.nodeName==="PRE"||e.nodeName==="CODE"}function $n(e,t){return e.isBlock=Ge(e),e.isCode=e.nodeName==="CODE"||e.parentNode.isCode,e.isBlank=Yn(e),e.flankingWhitespace=qn(e,t),e}function Yn(e){return!Pt(e)&&!Dn(e)&&/^\s*$/i.test(e.textContent)&&!On(e)&&!xn(e)}function qn(e,t){if(e.isBlock||t.preformattedCode&&e.isCode)return{leading:"",trailing:""};var i=Vn(e.textContent);return i.leadingAscii&&Rt("left",e,t)&&(i.leading=i.leadingNonAscii),i.trailingAscii&&Rt("right",e,t)&&(i.trailing=i.trailingNonAscii),{leading:i.leading,trailing:i.trailing}}function Vn(e){var t=e.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:t[1],leadingAscii:t[2],leadingNonAscii:t[3],trailing:t[4],trailingNonAscii:t[5],trailingAscii:t[6]}}function Rt(e,t,i){var r,a,l;return e==="left"?(r=t.previousSibling,a=/ $/):(r=t.nextSibling,a=/^ /),r&&(r.nodeType===3?l=a.test(r.nodeValue):i.preformattedCode&&r.nodeName==="CODE"?l=!1:r.nodeType===1&&!Ge(r)&&(l=a.test(r.textContent))),l}var Xn=Array.prototype.reduce,Kn=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function Ee(e){if(!(this instanceof Ee))return new Ee(e);var t={rules:_,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(i,r){return r.isBlock?`

`:""},keepReplacement:function(i,r){return r.isBlock?`

`+r.outerHTML+`

`:r.outerHTML},defaultReplacement:function(i,r){return r.isBlock?`

`+i+`

`:i}};this.options=Nn({},t,e),this.rules=new Ut(this.options)}Ee.prototype={turndown:function(e){if(!Jn(e))throw new TypeError(e+" is not a string, or an element/document/fragment node.");if(e==="")return"";var t=Ft.call(this,new Wn(e,this.options));return Zn.call(this,t)},use:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.use(e[t]);else if(typeof e=="function")e(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(e,t){return this.rules.add(e,t),this},keep:function(e){return this.rules.keep(e),this},remove:function(e){return this.rules.remove(e),this},escape:function(e){return Kn.reduce(function(t,i){return t.replace(i[0],i[1])},e)}};function Ft(e){var t=this;return Xn.call(e.childNodes,function(i,r){r=new $n(r,t.options);var a="";return r.nodeType===3?a=r.isCode?r.nodeValue:t.escape(r.nodeValue):r.nodeType===1&&(a=Qn.call(t,r)),zt(i,a)},"")}function Zn(e){var t=this;return this.rules.forEach(function(i){typeof i.append=="function"&&(e=zt(e,i.append(t.options)))}),e.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function Qn(e){var t=this.rules.forNode(e),i=Ft.call(this,e),r=e.flankingWhitespace;return(r.leading||r.trailing)&&(i=i.trim()),r.leading+t.replacement(i,e,this.options)+r.trailing}function zt(e,t){var i=Mn(e),r=kn(t),a=Math.max(e.length-i.length,t.length-r.length),l=`

`.substring(0,a);return i+l+r}function Jn(e){return e!=null&&(typeof e=="string"||e.nodeType&&(e.nodeType===1||e.nodeType===9||e.nodeType===11))}function ei(){const e=document.createElement("div");e.className="emoji-picker dropdown-menu";const t=["😀","😂","🥰","😎","🤔","👍","👎","❤️","⭐","🔥"];return e.innerHTML=t.map(i=>`<button class="emoji-btn" data-emoji="${i}">${i}</button>`).join(""),e}function ti(){const e=document.createElement("header");return e.innerHTML=`
    <div role="group">
      <details class="dropdown">
        <summary class="outline" role="button" aria-haspopup="listbox"><span data-placement="bottom" data-tooltip="Header Text, Quotes, Paragraph tags">Header &amp; Blocks</span></summary>
        <ul role="listbox">
          <li><a href="javascript:void(0);" data-command="formatBlock" data-value="h1"><h1>Heading 1</h1></a></li>
          <li><a href="javascript:void(0);" data-command="formatBlock" data-value="h2"><h2>Heading 2</h2></a></li>
          <li><a href="javascript:void(0);" data-command="formatBlock" data-value="h3"><h3>Heading 3</h3></a></li>
          <li><a href="javascript:void(0);" data-command="formatBlock" data-value="h4"><h4>Heading 4</h4></a></li>
          <li><a href="javascript:void(0);" data-command="formatBlock" data-value="h5"><h5>Heading 5</h5></a></li>
          <li><a href="javascript:void(0);" data-command="formatBlock" data-value="h6"><h6>Heading 6</h6></a></li>
          <li><a href="javascript:void(0);" data-command="formatBlock" data-value="p">Paragraph</a></li>
          <li><a href="javascript:void(0);" data-command="formatBlock" data-value="blockquote"><blockquote style="margin-block:0;">Blockquote</blockquote></a></li>
        </ul>
      </details>

      <details class="dropdown">
        <summary class="outline" role="button" aria-haspopup="listbox"><span data-placement="bottom" data-tooltip="Change font style"><i class="bi bi-fonts"></i></span></summary>
        <ul role="listbox">
          <li><a href="javascript:void(0);" data-command="fontName" data-value="Arial" style="font-family:Arial;">Arial</a></li>
          <li><a href="javascript:void(0);" data-command="fontName" data-value="Times New Roman" style="font-family:Times New Roman;">Times New Roman</a></li>
          <li><a href="javascript:void(0);" data-command="fontName" data-value="Courier New" style="font-family:Courier New;">Courier New</a></li>
        </ul>
      </details>

      <details class="dropdown">
        <summary class="outline" role="button" aria-haspopup="listbox"><span data-placement="bottom" data-tooltip="Insert Emoji"><i class="bi bi-emoji-smile"></i></span></summary>
        <ul role="listbox" class="emoji-menu" dir="rtl">
          ${ei().innerHTML}
        </ul>
      </details>
    </div>
    <nav>
      <ul>
        <li>
          <div role="group">
            <button class="outline" data-command="bold" data-tooltip="Bold"><i class="bi bi-type-bold"></i></button>
            <button class="outline" data-command="italic" data-tooltip="Italic"><i class="bi bi-type-italic"></i></button>
            <button class="outline" data-command="underline" data-tooltip="Underline"><i class="bi bi-type-underline"></i></button>
          </div>
        </li>
      </ul>
      <ul>
        <li>
          <div role="group">
            <button class="outline" data-command="justifyLeft" data-tooltip="Align Left"><i class="bi bi-text-left"></i></button>
            <button class="outline" data-command="justifyCenter" data-tooltip="Align Center"><i class="bi bi-text-center"></i></button>
            <button class="outline" data-command="justifyRight" data-tooltip="Align Right"><i class="bi bi-text-right"></i></button>
            <button class="outline" data-command="justifyFull" data-tooltip="Justify"><i class="bi bi-justify"></i></button>
          </div>
        </li>
      </ul>
      <ul>
        <li>
          <div role="group">
            <button class="outline" data-command="insertUnorderedList" data-tooltip="Bullet List"><i class="bi bi-list-ul"></i></button>
            <button class="outline" data-command="insertOrderedList" data-tooltip="Numbered List"><i class="bi bi-list-ol"></i></button>
            <button class="outline" data-command="insertHorizontalRule" data-tooltip="Horizontal Line"><i class="bi bi-dash-lg"></i></button>
          </div>
        </li>
      </ul>
    </nav>
    <nav>
      <ul>
        <li>
          <div role="group">
            <button class="outline" data-action="viewSource" data-tooltip="View Source"><i class="bi bi-code-slash"></i></button>
          </div>
        </li>
      </ul>
      <ul>
        <li>
          <div role="group">
            <button class="outline" data-action="insertCard" data-tooltip="Insert Card"><i class="bi bi-card-text"></i></button>
            <button class="outline" data-action="insertAccordion" data-tooltip="Insert Accordion"><i class="bi bi-chevron-down"></i></button>
            <button class="outline" data-action="insertImage" data-tooltip="Insert Image"><i class="bi bi-image"></i></button>
            <button class="outline" data-action="insertTable" data-tooltip="Insert Table"><i class="bi bi-table"></i></button>
            <button class="outline" data-action="insertLink" data-tooltip="Insert Link"><i class="bi bi-link"></i></button>
          </div>
        </li>
      </ul>
      <ul>
        <li>
          <div role="group">
            <button class="outline" data-action="undo" data-tooltip="Undo"><i class="bi bi-arrow-counterclockwise"></i></button>
            <button class="outline" data-action="redo" data-tooltip="Redo"><i class="bi bi-arrow-clockwise"></i></button>
          </div>
        </li>
      </ul>
    </nav>
  `,e}function ni(){const e=document.createElement("dialog");return e.classList.add("modal-lg"),e.innerHTML=`
    <article>
      <header>
        <h3>Insert Image</h3>
      </header>
      <input type="file" accept="image/*" id="imageUpload">
      <footer>
        <button id="cancelImage">Cancel</button>
        <button id="insertImageBtn">Insert</button>
      </footer>
    </article>
  `,e}function ii(){const e=document.createElement("dialog");return e.classList.add("modal-lg"),e.innerHTML=`
    <article>
      <header>
        <h3>Insert Table</h3>
      </header>
      <label>
        Rows: <input type="number" id="tableRows" value="3" min="1">
      </label>
      <label>
        Columns: <input type="number" id="tableCols" value="3" min="1">
      </label>
      <label>
        <input type="checkbox" id="stripedTable"> Striped Table
      </label>
      <footer>
        <button id="cancelTable">Cancel</button>
        <button id="insertTableBtn">Insert</button>
      </footer>
    </article>
  `,e}function ri(){const e=document.createElement("dialog");return e.classList.add("modal-lg"),e.innerHTML=`
    <article>
      <header>
        <h3>Insert Link</h3>
      </header>
      <input type="url" id="linkUrl" placeholder="https://">
      <input type="text" id="linkText" placeholder="Link Text">
      <footer>
        <button id="cancelLink">Cancel</button>
        <button id="insertLinkBtn">Insert</button>
      </footer>
    </article>
  `,e}function ai(){const e=document.createElement("dialog");return e.classList.add("modal-lg"),e.innerHTML=`
    <article>
      <header>
        <h3>Insert Card</h3>
      </header>
      <input type="text" id="cardHeader" placeholder="Card Header">
      <textarea id="cardBody" placeholder="Card Body" rows="4"></textarea>
      <input type="text" id="cardFooter" placeholder="Card Footer">
      <footer>
        <button id="cancelCard">Cancel</button>
        <button id="insertCardBtn">Insert</button>
      </footer>
    </article>
  `,e}function oi(){const e=document.createElement("dialog");return e.classList.add("modal-lg"),e.innerHTML=`
    <article>
      <header>
        <h3>Insert Accordion</h3>
      </header>
      <input type="text" id="accordionTitle" placeholder="Accordion Title">
      <textarea id="accordionContent" placeholder="Accordion Content" rows="4"></textarea>
      <footer>
        <button id="cancelAccordion">Cancel</button>
        <button id="insertAccordionBtn">Insert</button>
      </footer>
    </article>
  `,e}class li{constructor(){this.items=[],this.index=-1}push(t){this.index++,this.items=this.items.slice(0,this.index),this.items.push(t)}undo(){return this.index>0?(this.index--,this.items[this.index]):null}redo(){return this.index<this.items.length-1?(this.index++,this.items[this.index]):null}}function si(e){if(e=e.trim(),!e)return"";function t(r,a){let l=new Array(a+++1).join("  "),u=new Array(a-1).join("  "),f="";if(r.nodeType===3){let d=r.textContent.trim();return d?l+d+`
`:""}return r.nodeType===1?r===i&&r.children.length===1?Array.from(r.childNodes).map(d=>t(d,a-1)).join(""):(f+=l+"<"+r.nodeName.toLowerCase(),Array.from(r.attributes).forEach(d=>{f+=" "+d.name+'="'+d.value+'"'}),r.childNodes.length===0?f+=` />
`:(f+=`>
`,Array.from(r.childNodes).forEach(d=>{f+=t(d,a)}),f+=u+"</"+r.nodeName.toLowerCase()+`>
`),f):""}const i=document.createElement("div");return i.innerHTML=e,Array.from(i.childNodes).map(r=>t(r,0)).join("").trim()}class ci{constructor(t){this.container=t,this.history=new li,this.turndownService=new Ee,this.init()}init(){this.toolbar=ti(),this.container.appendChild(this.toolbar),this.editor=document.createElement("div"),this.editor.className="editor-content",this.editor.contentEditable=!0,this.container.appendChild(this.editor),this.cardModal=ai(),this.accordionModal=oi(),this.imageModal=ni(),this.tableModal=ii(),this.linkModal=ri(),this.modalContainer=document.createElement("div"),this.modalContainer.id="modalContainer",document.body.appendChild(this.cardModal),document.body.appendChild(this.accordionModal),document.body.appendChild(this.imageModal),document.body.appendChild(this.tableModal),document.body.appendChild(this.linkModal),this.setupEventListeners()}getRangeOrSetToEnd(){const t=window.getSelection();if(this.editor.focus(),t.rangeCount>0){const r=t.getRangeAt(0);if(this.editor.contains(r.commonAncestorContainer))return r}const i=document.createRange();return i.selectNodeContents(this.editor),i.collapse(!1),t.removeAllRanges(),t.addRange(i),i}setupEventListeners(){this.toolbar.querySelectorAll("[data-command]").forEach(i=>{i.addEventListener("click",r=>{const a=r.target.closest("[data-command]").dataset.command,l=r.target.closest("[data-command]").dataset.value||"";this.execCommand(a,l)})});const t=i=>()=>{this.range=this.getRangeOrSetToEnd(),i.call(this)};this.toolbar.querySelector('[data-action="insertCard"]').addEventListener("click",t(this.handleCardInsert)),this.toolbar.querySelector('[data-action="insertAccordion"]').addEventListener("click",t(this.handleAccordionInsert)),this.toolbar.querySelector('[data-action="insertImage"]').addEventListener("click",t(this.handleImageInsert)),this.toolbar.querySelector('[data-action="insertTable"]').addEventListener("click",t(this.handleTableInsert)),this.toolbar.querySelector('[data-action="insertLink"]').addEventListener("click",t(this.handleLinkInsert)),this.toolbar.querySelector('[data-action="undo"]').addEventListener("click",()=>this.undo()),this.toolbar.querySelector('[data-action="redo"]').addEventListener("click",()=>this.redo()),this.toolbar.querySelector('[data-action="viewSource"]').addEventListener("click",()=>this.toggleSource()),this.toolbar.querySelectorAll(".emoji-btn").forEach(i=>{i.addEventListener("click",r=>{r.preventDefault(),this.execCommand("insertText",r.target.dataset.emoji)})}),this.editor.addEventListener("input",()=>{this.history.push(this.editor.innerHTML)})}handleCardInsert(){this.cardModal.showModal();const t=document.getElementById("cancelCard"),i=document.getElementById("insertCardBtn"),r=()=>{const u=document.getElementById("cardHeader").value,f=document.getElementById("cardBody").value,d=document.getElementById("cardFooter").value,h=`
        <article>
          ${u?`<header>${u}</header>`:""}
          <div class="card-body">${f}</div>
          ${d?`<footer>${d}</footer>`:""}
        </article>
      `;this.insertContent(U.sanitize(h)),this.cardModal.close(),a()},a=()=>{i.removeEventListener("click",r),t.removeEventListener("click",l)},l=()=>{this.cardModal.close(),a()};i.addEventListener("click",r),t.addEventListener("click",l)}handleAccordionInsert(){this.accordionModal.showModal();const t=document.getElementById("cancelAccordion"),i=document.getElementById("insertAccordionBtn"),r=()=>{const u=document.getElementById("accordionTitle").value,f=document.getElementById("accordionContent").value,d=`
        <details class="accordion">
          <summary>${u}</summary>
          <div class="accordion-content">${f}</div>
        </details>
      `;this.insertContent(U.sanitize(d)),this.accordionModal.close(),a()},a=()=>{i.removeEventListener("click",r),t.removeEventListener("click",l)},l=()=>{this.accordionModal.close(),a()};i.addEventListener("click",r),t.addEventListener("click",l)}handleImageInsert(){this.imageModal.showModal();const t=document.getElementById("cancelImage"),i=document.getElementById("insertImageBtn"),r=document.getElementById("imageUpload"),a=()=>{const f=r.files[0];if(f){const d=new FileReader;d.onload=h=>{const v=`<img src="${h.target.result}" alt="${f.name}" style="max-width: 100%;">`;this.insertContent(U.sanitize(v)),this.imageModal.close(),l()},d.readAsDataURL(f)}},l=()=>{i.removeEventListener("click",a),t.removeEventListener("click",u)},u=()=>{this.imageModal.close(),l()};i.addEventListener("click",a),t.addEventListener("click",u)}handleTableInsert(){this.tableModal.showModal();const t=document.getElementById("cancelTable"),i=document.getElementById("insertTableBtn"),r=()=>{const u=parseInt(document.getElementById("tableRows").value),f=parseInt(document.getElementById("tableCols").value);let h=`<table class="${document.getElementById("stripedTable").checked?"striped":""}">`;for(let v=0;v<u;v++){v===0?h+="<thead>":v===1&&(h+="</thead><tbody>"),h+="<tr>";for(let B=0;B<f;B++)v===0?h+="<th>Header</th>":h+="<td>Cell</td>";h+="</tr>"}h+="</tbody></table>",this.insertContent(`
`+U.sanitize(h)+`
`),this.tableModal.close(),a()},a=()=>{i.removeEventListener("click",r),t.removeEventListener("click",l)},l=()=>{this.tableModal.close(),a()};i.addEventListener("click",r),t.addEventListener("click",l)}handleLinkInsert(){this.linkModal.showModal();const t=document.getElementById("cancelLink"),i=document.getElementById("insertLinkBtn"),r=document.getElementById("linkUrl"),a=document.getElementById("linkText"),l=()=>{const h=r.value,v=a.value||h;if(h){const B=`<a href="${h}" target="_blank">${v}</a>`;this.insertContent(U.sanitize(B)),r.value="",a.value="",this.linkModal.close()}},u=()=>{r.value="",a.value="",this.linkModal.close()},f=t.cloneNode(!0),d=i.cloneNode(!0);t.parentNode.replaceChild(f,t),i.parentNode.replaceChild(d,i),f.addEventListener("click",u),d.addEventListener("click",l)}insertContent(t,i=!0){if(this.range.deleteContents(),i){const a=this.range.createContextualFragment(t);this.range.insertNode(a)}else{const a=document.createTextNode(t);this.range.insertNode(a)}this.range.collapse(!1);const r=window.getSelection();r.removeAllRanges(),r.addRange(this.range),this.history.push(this.editor.innerHTML)}execCommand(t,i=""){this.editor.focus(),document.execCommand(t,!1,i),this.history.push(this.editor.innerHTML)}getContent(t="html"){const i=U.sanitize(this.editor.innerHTML);return t==="markdown"?this.turndownService.turndown(i):i}setContent(t){this.editor.innerHTML=U.sanitize(t),this.history.push(this.editor.innerHTML)}undo(){const t=this.history.undo();t!==null&&(this.editor.innerHTML=t)}redo(){const t=this.history.redo();t!==null&&(this.editor.innerHTML=t)}toggleSource(){const t=this.editor.classList.contains("showing-source"),i=this.toolbar.querySelector('[data-action="viewSource"] .bi');if(t){const r=this.editor.textContent;this.editor.classList.remove("showing-source"),this.editor.innerHTML=r,i.classList.remove("bi-code"),i.classList.add("bi-code-slash")}else{const r=this.editor.innerHTML;this.editor.classList.add("showing-source"),this.editor.textContent=si(r),i.classList.remove("bi-code-slash"),i.classList.add("bi-code")}}removeEventListeners(){this.toolbar.querySelectorAll("[data-command]").forEach(r=>{const a=l=>{const u=l.target.closest("[data-command]").dataset.command,f=l.target.closest("[data-command]").dataset.value||"";this.execCommand(u,f)};r.removeEventListener("click",a)}),[{selector:'[data-action="insertCard"]',action:this.handleCardInsert},{selector:'[data-action="insertAccordion"]',action:this.handleAccordionInsert},{selector:'[data-action="insertImage"]',action:this.handleImageInsert},{selector:'[data-action="insertTable"]',action:this.handleTableInsert},{selector:'[data-action="insertLink"]',action:this.handleLinkInsert},{selector:'[data-action="undo"]',action:this.undo},{selector:'[data-action="redo"]',action:this.redo},{selector:'[data-action="viewSource"]',action:this.toggleSource}].forEach(({selector:r,action:a})=>{const l=this.toolbar.querySelector(r);if(l){const u=()=>{typeof a=="function"&&a.call(this)};l.removeEventListener("click",u)}}),this.toolbar.querySelectorAll(".emoji-btn").forEach(r=>{const a=l=>{l.preventDefault(),this.execCommand("insertText",l.target.dataset.emoji)};r.removeEventListener("click",a)});const i=()=>{this.history.push(this.editor.innerHTML)};this.editor.removeEventListener("input",i)}}const di=document.querySelector("#app"),Nt=new ci(di);document.querySelector("#app").insertAdjacentHTML("beforeend",`
  <footer>
    <form id="editorForm" class="container">
      <button type="submit">Submit</button>
    </form>
  </footer>
`);document.querySelector("#editorForm").addEventListener("submit",e=>{e.preventDefault();const t=Nt.getContent("html"),i=Nt.getContent("markdown");console.log("HTML Content:",t),console.log("Markdown Content:",i)});
